<!-- Hero -->
<section class="services-hero">
    <div class="services-hero-content">
        <h1>
            Catalogue des Services
        </h1>
        <p>
            D√©couvrez l'ensemble des services publics num√©riques disponibles pour simplifier vos d√©marches administratives au S√©n√©gal.
        </p>
        <div class="hero-stats">
            <div class="hero-stat-item">
                <div class="hero-stat-number">
                    127
                </div>
                <div class="hero-stat-label">
                    Services Disponibles
                </div>
            </div>
            <div class="hero-stat-item">
                <div class="hero-stat-number">
                    45+
                </div>
                <div class="hero-stat-label">
                    Administrations
                </div>
            </div>
            <div class="hero-stat-item">
                <div class="hero-stat-number">
                    850K
                </div>
                <div class="hero-stat-label">
                    Utilisateurs Actifs
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Search & Filter -->
<section class="search-filter-section">
    <div class="search-filter-container">
        <div class="search-box">
            <span class="search-icon">üîç</span> <input type="text" placeholder="Rechercher un service..." id="searchInput">
        </div>
        <div class="filter-buttons">
            <button class="filter-btn active" data-category="all">Tous</button> <button class="filter-btn" data-category="populaires">Populaires</button> <button class="filter-btn" data-category="nouveaux">Nouveaux</button>
        </div>
    </div>
</section>
<!-- Services Main -->
<main class="services-main">
    <div class="services-container">
        <!-- Protection Sociale -->
        <div class="category-section" data-category="protection-sociale">
            <div class="category-header">
                <div class="category-icon">
                    <img src="/themes/custom/egov_theme/icon/protection-sociale.png" alt="Administrations" width="48" height="48">
                </div>
                <div class="category-info">
                    <h2>
                        Protection Sociale
                    </h2>
                    <div class="category-count">
                        15 services disponibles
                    </div>
                </div>
            </div>
            <div class="services-grid">
                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">
                            &nbsp;
                        </div>
                        <div class="service-info">
                            <h3>
                                Allocations Familiales
                            </h3>
                            <p>
                                <span class="service-badge">Populaire</span>
                            </p>
                        </div>
                    </div>
                    <p>
                        Demande et suivi des allocations familiales en ligne. Paiement direct et rapide.
                    </p>
                    <div class="service-meta">
                        <div class="service-users">
                            üë• 125K utilisateurs
                        </div>
                        <p>
                            <a class="service-link" href="#"><span>Acc√©der</span> <span>‚Üí</span>&nbsp;</a>
                        </p>
                    </div>
                </div>
                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">
                            &nbsp;
                        </div>
                        <div class="service-info">
                            <h3>
                                Couverture Maladie
                            </h3>
                        </div>
                    </div>
                    <p>
                        Inscription et gestion de votre couverture maladie universelle.
                    </p>
                    <div class="service-meta">
                        <div class="service-users">
                            üë• 98K utilisateurs
                        </div>
                        <p>
                            <a class="service-link" href="#"><span>Acc√©der</span> <span>‚Üí</span>&nbsp;</a>
                        </p>
                    </div>
                </div>
                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">
                            &nbsp;
                        </div>
                        <div class="service-info">
                            <h3>
                                Aide √† la Petite Enfance
                            </h3>
                            <p>
                                <span class="service-badge">Nouveau</span>
                            </p>
                        </div>
                    </div>
                    <p>
                        Demande d'aides pour la garde d'enfants et allocations parentales.
                    </p>
                    <div class="service-meta">
                        <div class="service-users">
                            üë• 45K utilisateurs
                        </div>
                        <p>
                            <a class="service-link" href="#"><span>Acc√©der</span> <span>‚Üí</span>&nbsp;</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <!-- Troisi√®me √Çge -->
        <div class="category-section" data-category="troisieme-age">
            <div class="category-header">
                <div class="category-icon">
                    <img src="/themes/custom/egov_theme/icon/troisieme-age.png" alt="Administrations" width="48" height="48">
                </div>
                <div class="category-info">
                    <h2>
                        Troisi√®me √Çge
                    </h2>
                    <div class="category-count">
                        12 services disponibles
                    </div>
                </div>
            </div>
            <div class="services-grid">
                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">
                            &nbsp;
                        </div>
                        <div class="service-info">
                            <h3>
                                Pension de Retraite
                            </h3>
                            <p>
                                <span class="service-badge">Populaire</span>
                            </p>
                        </div>
                    </div>
                    <p>
                        Consultation et gestion de votre pension de retraite en ligne.
                    </p>
                    <div class="service-meta">
                        <div class="service-users">
                            üë• 156K utilisateurs
                        </div>
                        <p>
                            <a class="service-link" href="#"><span>Acc√©der</span> <span>‚Üí</span>&nbsp;</a>
                        </p>
                    </div>
                </div>
                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">
                            &nbsp;
                        </div>
                        <div class="service-info">
                            <h3>
                                Aide au Logement Senior
                            </h3>
                        </div>
                    </div>
                    <p>
                        Demande d'aides pour l'adaptation de votre logement.
                    </p>
                    <div class="service-meta">
                        <div class="service-users">
                            üë• 34K utilisateurs
                        </div>
                        <p>
                            <a class="service-link" href="#"><span>Acc√©der</span> <span>‚Üí</span>&nbsp;</a>
                        </p>
                    </div>
                </div>
                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">
                            &nbsp;
                        </div>
                        <div class="service-info">
                            <h3>
                                Soins √† Domicile
                            </h3>
                        </div>
                    </div>
                    <p>
                        Demande et planification de soins √† domicile pour seniors.
                    </p>
                    <div class="service-meta">
                        <div class="service-users">
                            üë• 28K utilisateurs
                        </div>
                        <p>
                            <a class="service-link" href="#"><span>Acc√©der</span> <span>‚Üí</span>&nbsp;</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <!-- √âducation -->
        <div class="category-section" data-category="education">
            <div class="category-header">
                <div class="category-icon">
                    <img src="/themes/custom/egov_theme/icon/education.png" alt="Administrations" width="48" height="48">
                </div>
                <div class="category-info">
                    <h2>
                        √âducation
                    </h2>
                    <div class="category-count">
                        25 services disponibles
                    </div>
                </div>
            </div>
            <div class="services-grid">
                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">
                            &nbsp;
                        </div>
                        <div class="service-info">
                            <h3>
                                Inscription Scolaire
                            </h3>
                            <p>
                                <span class="service-badge">Populaire</span>
                            </p>
                        </div>
                    </div>
                    <p>
                        Inscription en ligne dans les √©tablissements scolaires publics.
                    </p>
                    <div class="service-meta">
                        <div class="service-users">
                            üë• 245K utilisateurs
                        </div>
                        <p>
                            <a class="service-link" href="#"><span>Acc√©der</span> <span>‚Üí</span>&nbsp;</a>
                        </p>
                    </div>
                </div>
                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">
                            &nbsp;
                        </div>
                        <div class="service-info">
                            <h3>
                                Bourses d'√âtudes
                            </h3>
                        </div>
                    </div>
                    <p>
                        Demande et suivi de bourses scolaires et universitaires.
                    </p>
                    <div class="service-meta">
                        <div class="service-users">
                            üë• 167K utilisateurs
                        </div>
                        <p>
                            <a class="service-link" href="#"><span>Acc√©der</span> <span>‚Üí</span>&nbsp;</a>
                        </p>
                    </div>
                </div>
                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">
                            &nbsp;
                        </div>
                        <div class="service-info">
                            <h3>
                                R√©sultats d'Examens
                            </h3>
                            <p>
                                <span class="service-badge">Nouveau</span>
                            </p>
                        </div>
                    </div>
                    <p>
                        Consultation en ligne des r√©sultats du Bac, BFEM et autres examens.
                    </p>
                    <div class="service-meta">
                        <div class="service-users">
                            üë• 189K utilisateurs
                        </div>
                        <p>
                            <a class="service-link" href="#"><span>Acc√©der</span> <span>‚Üí</span>&nbsp;</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <!-- Citoyennet√© -->
        <div class="category-section" data-category="citoyennete">
            <div class="category-header">
                <div class="category-icon">
                    <img src="/themes/custom/egov_theme/icon/citoyennete.png" alt="Administrations" width="48" height="48">
                </div>
                <div class="category-info">
                    <h2>
                        Citoyennet√©
                    </h2>
                    <div class="category-count">
                        18 services disponibles
                    </div>
                </div>
            </div>
            <div class="services-grid">
                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">
                            &nbsp;
                        </div>
                        <div class="service-info">
                            <h3>
                                Carte d'Identit√© Nationale
                            </h3>
                            <p>
                                <span class="service-badge">Populaire</span>
                            </p>
                        </div>
                    </div>
                    <p>
                        Demande, renouvellement et suivi de votre carte d'identit√©.
                    </p>
                    <div class="service-meta">
                        <div class="service-users">
                            üë• 312K utilisateurs
                        </div>
                        <p>
                            <a class="service-link" href="#"><span>Acc√©der</span> <span>‚Üí</span>&nbsp;</a>
                        </p>
                    </div>
                </div>
                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">
                            &nbsp;
                        </div>
                        <div class="service-info">
                            <h3>
                                Passeport
                            </h3>
                        </div>
                    </div>
                    <p>
                        Pr√©-demande de passeport et prise de rendez-vous en ligne.
                    </p>
                    <div class="service-meta">
                        <div class="service-users">
                            üë• 198K utilisateurs
                        </div>
                        <p>
                            <a class="service-link" href="#"><span>Acc√©der</span> <span>‚Üí</span>&nbsp;</a>
                        </p>
                    </div>
                </div>
                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">
                            &nbsp;
                        </div>
                        <div class="service-info">
                            <h3>
                                Actes d'√âtat Civil
                            </h3>
                        </div>
                    </div>
                    <p>
                        Demande en ligne d'extraits de naissance, mariage, d√©c√®s.
                    </p>
                    <div class="service-meta">
                        <div class="service-users">
                            üë• 276K utilisateurs
                        </div>
                        <p>
                            <a class="service-link" href="#"><span>Acc√©der</span> <span>‚Üí</span>&nbsp;</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <!-- Taxes -->
        <div class="category-section" data-category="taxes">
            <div class="category-header">
                <div class="category-icon">
                    <img src="/themes/custom/egov_theme/icon/taxe.png" alt="Administrations" width="48" height="48">
                </div>
                <div class="category-info">
                    <h2>
                        Taxes &amp; Imp√¥ts
                    </h2>
                    <div class="category-count">
                        20 services disponibles
                    </div>
                </div>
            </div>
            <div class="services-grid">
                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">
                            &nbsp;
                        </div>
                        <div class="service-info">
                            <h3>
                                D√©claration d'Imp√¥ts
                            </h3>
                            <p>
                                <span class="service-badge">Populaire</span>
                            </p>
                        </div>
                    </div>
                    <p>
                        D√©claration en ligne de vos revenus et paiement s√©curis√©.
                    </p>
                    <div class="service-meta">
                        <div class="service-users">
                            üë• 234K utilisateurs
                        </div>
                        <p>
                            <a class="service-link" href="#"><span>Acc√©der</span> <span>‚Üí</span>&nbsp;</a>
                        </p>
                    </div>
                </div>
                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">
                            &nbsp;
                        </div>
                        <div class="service-info">
                            <h3>
                                Taxe Professionnelle
                            </h3>
                        </div>
                    </div>
                    <p>
                        D√©claration et paiement de la taxe professionnelle pour entreprises.
                    </p>
                    <div class="service-meta">
                        <div class="service-users">
                            üë• 89K utilisateurs
                        </div>
                        <p>
                            <a class="service-link" href="#"><span>Acc√©der</span> <span>‚Üí</span>&nbsp;</a>
                        </p>
                    </div>
                </div>
                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">
                            &nbsp;
                        </div>
                        <div class="service-info">
                            <h3>
                                Taxe sur V√©hicules
                            </h3>
                        </div>
                    </div>
                    <p>
                        Paiement en ligne de la vignette et autres taxes v√©hicules.
                    </p>
                    <div class="service-meta">
                        <div class="service-users">
                            üë• 156K utilisateurs
                        </div>
                        <p>
                            <a class="service-link" href="#"><span>Acc√©der</span> <span>‚Üí</span>&nbsp;</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <!-- Sant√© -->
        <div class="category-section" data-category="sante">
            <div class="category-header">
                <div class="category-icon">
                    <img src="/themes/custom/egov_theme/icon/sante.png" alt="Administrations" width="48" height="48">
                </div>
                <div class="category-info">
                    <h2>
                        Sant√©
                    </h2>
                    <div class="category-count">
                        22 services disponibles
                    </div>
                </div>
            </div>
            <div class="services-grid">
                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">
                            &nbsp;
                        </div>
                        <div class="service-info">
                            <h3>
                                Dossier M√©dical Partag√©
                            </h3>
                            <p>
                                <span class="service-badge">Populaire</span>
                            </p>
                        </div>
                    </div>
                    <p>
                        Acc√®s s√©curis√© √† votre dossier m√©dical depuis n'importe o√π.
                    </p>
                    <div class="service-meta">
                        <div class="service-users">
                            üë• 198K utilisateurs
                        </div>
                        <p>
                            <a class="service-link" href="#"><span>Acc√©der</span> <span>‚Üí</span>&nbsp;</a>
                        </p>
                    </div>
                </div>
                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">
                            &nbsp;
                        </div>
                        <div class="service-info">
                            <h3>
                                Rendez-vous M√©dical
                            </h3>
                            <p>
                                <span class="service-badge">Nouveau</span>
                            </p>
                        </div>
                    </div>
                    <p>
                        Prise de rendez-vous en ligne dans les h√¥pitaux et centres de sant√©.
                    </p>
                    <div class="service-meta">
                        <div class="service-users">
                            üë• 143K utilisateurs
                        </div>
                        <p>
                            <a class="service-link" href="#"><span>Acc√©der</span> <span>‚Üí</span>&nbsp;</a>
                        </p>
                    </div>
                </div>
                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">
                            &nbsp;
                        </div>
                        <div class="service-info">
                            <h3>
                                Carnet de Vaccination
                            </h3>
                        </div>
                    </div>
                    <p>
                        Consultation et mise √† jour de votre carnet de vaccination num√©rique.
                    </p>
                    <div class="service-meta">
                        <div class="service-users">
                            üë• 167K utilisateurs
                        </div>
                        <p>
                            <a class="service-link" href="#"><span>Acc√©der</span> <span>‚Üí</span>&nbsp;</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<script>
(function() {
    'use strict';

    console.log('Services - Filtres et recherche initialis√©s');

    // ========== √âL√âMENTS DOM ==========
    const searchInput = document.getElementById('searchInput');
    const filterButtons = document.querySelectorAll('.filter-btn');
    const serviceItems = document.querySelectorAll('.service-item');
    const categorySections = document.querySelectorAll('.category-section');

    // √âtat actuel des filtres
    let currentFilter = 'all';
    let currentSearch = '';

    // ========== FONCTION DE RECHERCHE ==========
    function performSearch() {
        const searchTerm = searchInput.value.toLowerCase().trim();
        currentSearch = searchTerm;
        
        let visibleCount = 0;

        serviceItems.forEach(item => {
            const title = item.querySelector('h3').textContent.toLowerCase();
            const description = item.querySelector('p').textContent.toLowerCase();
            
            // V√©rifier si l'item correspond √† la recherche
            const matchesSearch = searchTerm === '' || 
                                  title.includes(searchTerm) || 
                                  description.includes(searchTerm);
            
            // V√©rifier si l'item correspond au filtre actuel
            let matchesFilter = true;
            if (currentFilter === 'populaires') {
                const badge = item.querySelector('.service-badge');
                matchesFilter = badge && badge.textContent.trim() === 'Populaire';
            } else if (currentFilter === 'nouveaux') {
                const badge = item.querySelector('.service-badge');
                matchesFilter = badge && badge.textContent.trim() === 'Nouveau';
            }
            
            // Afficher ou masquer l'item
            if (matchesSearch && matchesFilter) {
                item.style.display = 'block';
                visibleCount++;
            } else {
                item.style.display = 'none';
            }
        });

        // Afficher/masquer les sections de cat√©gories vides
        updateCategorySections();
        
        console.log('Recherche:', searchTerm, '| R√©sultats:', visibleCount);
    }

    // ========== FONCTION DE FILTRAGE ==========
    function performFilter(category) {
        currentFilter = category;
        
        let visibleCount = 0;

        if (category === 'all') {
            // Afficher tous les services qui correspondent √† la recherche
            serviceItems.forEach(item => {
                const title = item.querySelector('h3').textContent.toLowerCase();
                const description = item.querySelector('p').textContent.toLowerCase();
                
                if (currentSearch === '' || 
                    title.includes(currentSearch) || 
                    description.includes(currentSearch)) {
                    item.style.display = 'block';
                    visibleCount++;
                } else {
                    item.style.display = 'none';
                }
            });
        } else if (category === 'populaires') {
            // Afficher uniquement les services populaires
            serviceItems.forEach(item => {
                const badge = item.querySelector('.service-badge');
                const isPopular = badge && badge.textContent.trim() === 'Populaire';
                
                const title = item.querySelector('h3').textContent.toLowerCase();
                const description = item.querySelector('p').textContent.toLowerCase();
                const matchesSearch = currentSearch === '' || 
                                      title.includes(currentSearch) || 
                                      description.includes(currentSearch);
                
                if (isPopular && matchesSearch) {
                    item.style.display = 'block';
                    visibleCount++;
                } else {
                    item.style.display = 'none';
                }
            });
        } else if (category === 'nouveaux') {
            // Afficher uniquement les nouveaux services
            serviceItems.forEach(item => {
                const badge = item.querySelector('.service-badge');
                const isNew = badge && badge.textContent.trim() === 'Nouveau';
                
                const title = item.querySelector('h3').textContent.toLowerCase();
                const description = item.querySelector('p').textContent.toLowerCase();
                const matchesSearch = currentSearch === '' || 
                                      title.includes(currentSearch) || 
                                      description.includes(currentSearch);
                
                if (isNew && matchesSearch) {
                    item.style.display = 'block';
                    visibleCount++;
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Afficher/masquer les sections de cat√©gories vides
        updateCategorySections();
        
        console.log('Filtre:', category, '| R√©sultats:', visibleCount);
    }

    // ========== MISE √Ä JOUR DES SECTIONS DE CAT√âGORIES ==========
    function updateCategorySections() {
        categorySections.forEach(section => {
            const servicesInSection = section.querySelectorAll('.service-item');
            let hasVisibleService = false;
            
            servicesInSection.forEach(service => {
                if (service.style.display !== 'none') {
                    hasVisibleService = true;
                }
            });
            
            // Afficher ou masquer toute la section
            if (hasVisibleService) {
                section.style.display = 'block';
            } else {
                section.style.display = 'none';
            }
        });
    }

    // ========== √âV√âNEMENTS ==========
    
    // Recherche avec debounce (attendre 300ms apr√®s la derni√®re frappe)
    let searchTimeout;
    if (searchInput) {
        searchInput.addEventListener('input', function() {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(performSearch, 300);
        });
    }

    // Boutons de filtre
    filterButtons.forEach(button => {
        button.addEventListener('click', function() {
            // Retirer la classe active de tous les boutons
            filterButtons.forEach(btn => btn.classList.remove('active'));
            
            // Ajouter la classe active au bouton cliqu√©
            this.classList.add('active');
            
            // Appliquer le filtre
            const category = this.getAttribute('data-category');
            performFilter(category);
        });
    });

    // ========== MESSAGE SI AUCUN R√âSULTAT ==========
    function checkForNoResults() {
        let anyVisible = false;
        serviceItems.forEach(item => {
            if (item.style.display !== 'none') {
                anyVisible = true;
            }
        });

        // Retirer les anciens messages
        const existingMessage = document.querySelector('.no-results-message');
        if (existingMessage) {
            existingMessage.remove();
        }

        // Afficher un message si aucun r√©sultat
        if (!anyVisible) {
            const container = document.querySelector('.services-container');
            const message = document.createElement('div');
            message.className = 'no-results-message';
            message.style.cssText = 'text-align: center; padding: 4rem 2rem; color: #666;';
            message.innerHTML = `
                <div style="font-size: 3rem; margin-bottom: 1rem;">üîç</div>
                <h3 style="margin-bottom: 0.5rem;">Aucun r√©sultat trouv√©</h3>
                <p>Essayez de modifier vos crit√®res de recherche ou de filtre</p>
            `;
            container.appendChild(message);
        }
    }

    // V√©rifier apr√®s chaque recherche/filtre
    const originalPerformSearch = performSearch;
    performSearch = function() {
        originalPerformSearch();
        checkForNoResults();
    };

    const originalPerformFilter = performFilter;
    performFilter = function(category) {
        originalPerformFilter(category);
        checkForNoResults();
    };

    // ========== INITIALISATION ==========
    console.log('Services trouv√©s:', serviceItems.length);
    console.log('Cat√©gories:', categorySections.length);
    console.log('Boutons de filtre:', filterButtons.length);

})();
</script>

<style>
/* Animation pour les transitions */
.service-item {
    transition: opacity 0.3s ease, transform 0.3s ease;
}

.service-item[style*="display: none"] {
    opacity: 0;
    transform: scale(0.95);
}

.category-section {
    transition: opacity 0.3s ease;
}

.category-section[style*="display: none"] {
    opacity: 0;
}

/* Style pour le message "aucun r√©sultat" */
.no-results-message {
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Active state pour les boutons de filtre */
.filter-btn {
    transition: all 0.3s ease;
}

.filter-btn.active {
    background: #00a651;
    color: white;
    transform: scale(1.05);
}

/* Style pour la barre de recherche pendant la saisie */
.search-box input:focus {
    border-color: #00a651;
    box-shadow: 0 0 0 3px rgba(0, 166, 81, 0.1);
    outline: none;
}
</style>