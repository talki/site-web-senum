{# Template pour le d√©tail d'une publication #}

<!-- Breadcrumb -->
<div class="breadcrumb">
    <div class="breadcrumb-container">
        <a href="/">Accueil</a>
        <span>‚Ä∫</span>
        <a href="/publications">Publications: </a>
        <span>‚Ä∫</span>
        <span>{{ node.title.value }}test3:</span>
    </div>
</div>

<!-- Main Content -->
<main class="publication-main">
    <div class="publication-container">

        <!-- Left Column: Publication Content -->
        <div class="publication-content-section">

            <!-- Publication Card -->
            <article class="publication-card">

                <!-- Header -->
                <div class="publication-header">
                    <div class="author-section">
                        <div class="author-avatar"></div>
                        <div class="author-info">
                            <div class="author-name">Minist√®re du Num√©rique - MCTN</div>
                            <div class="publication-meta">
                                <div class="meta-item">
                                    <span>üìÖ</span>
                                    <span>{{ node.created.value|format_date('custom', 'd F Y ¬∑ H:i', '', 'fr') }}</span>
                                </div>
                                {% if node.field_temps_lecture.value %}
                                    <div class="meta-item">
                                        <span>‚è±Ô∏è</span>
                                        <span>{{ node.field_temps_lecture.value }} min de lecture</span>
                                    </div>
                                {% endif %}
                                <div class="meta-item">
                                    <span>üëÅÔ∏è</span>
                                    <span>{{ random(500, 5000) }} vues</span>
                                </div>
                            </div>
                        </div>
                        {% if node.field_categorie.value %}
                            <span class="publication-badge badge-{{ node.field_categorie.value }}">
                                {% if node.field_categorie.value == 'urgent' %}Urgent
                                {% elseif node.field_categorie.value == 'nouveau' %}Nouveau
                                {% elseif node.field_categorie.value == 'info' %}Info
                                {% elseif node.field_categorie.value == 'annonce' %}Annonce
                                {% endif %}
                            </span>
                        {% endif %}
                    </div>
                    <h1 class="publication-title">{{ node.title.value }}</h1>
                </div>

                <!-- Actions Bar -->
                <div class="actions-bar">
                    <button class="action-btn">
                        <span></span>
                        <span>{{ random(50, 300) }}</span>
                    </button>

                    <button class="action-btn">
                        <span>üí¨</span>
                        <span>
                            {% if node.comment.comment_count == 0 %}
                                Aucun commentaire
                            {% elseif node.comment.comment_count == 1 %}
                                1 commentaire
                            {% else %}
                                {{ node.comment.comment_count }} commentaires
                            {% endif %}
                        </span>
                    </button>

                    <button class="action-btn">
                        <span>üì§</span>
                        <span>Partager</span>
                    </button>
                    <button class="action-btn">
                        <span>üîñ</span>
                        <span>Sauvegarder</span>
                    </button>
                </div>

                <!-- Featured Image -->
                {% if node.field_image_actualite %}
                    <div class="featured-image-section">
                        {{ content.field_image_actualite }}
                        <p class="image-caption">{{ node.title.value }}</p>
                    </div>
                {% endif %}

                <!-- Article Content -->
                <div class="article-content">
                    {% if node.field_extrait.value %}
                        <p><strong>{{ node.field_extrait.value }}</strong></p>
                    {% endif %}

                    {{ content.body }}
                </div>

                <!-- Tags -->
                <div class="tags-section">
                    <div class="tags-title">Tags</div>
                    <div class="tags-list">
                        {% if node.field_categorie.value == 'nouveau' %}
                            <span class="tag">Nouveau</span>
                            <span class="tag">Innovation</span>
                        {% elseif node.field_categorie.value == 'urgent' %}
                            <span class="tag">Urgent</span>
                            <span class="tag">Important</span>
                        {% endif %}
                        <span class="tag">Publication</span>
                        <span class="tag">MCTN</span>
                    </div>
                </div>

            </article>


            <!-- Comments Section - AFFICHAGE FORC√â -->
            <div class="comments-section">


                <!-- Liste des commentaires Drupal -->
                <div class="comments-list-drupal">
                    {{ content.comment }}
                </div>

            </div>

        </div>

        <!-- Right Column: Sidebar -->
        <aside class="sidebar">

      <!-- Related Posts -->
<div class="sidebar-card">
    <div class="sidebar-title">
        <span></span>
        <span>Publications similaires</span>
    </div>

    {% set pub_sim1 = publications_similaires[0]|default(null) %}
    {% set pub_sim1_url = pub_sim1 ? path('entity.node.canonical', {'node': pub_sim1.id}) : '#' %}
    <a href="{{ pub_sim1_url }}" class="related-post">
        <div class="related-icon">üîí</div>
        <div class="related-info">
            <h4>{{ pub_sim1 ? pub_sim1.title.value : 'Nouvelle politique de s√©curit√© renforc√©e' }}</h4>
            <div class="related-date">{{ pub_sim1 ? pub_sim1.created.value|date('d M Y') : 'Il y a 2 jours' }}</div>
        </div>
    </a>

    {% set pub_sim2 = publications_similaires[1]|default(null) %}
    {% set pub_sim2_url = pub_sim2 ? path('entity.node.canonical', {'node': pub_sim2.id}) : '#' %}
    <a href="{{ pub_sim2_url }}" class="related-post">
        <div class="related-icon">üìò</div>
        <div class="related-info">
            <h4>{{ pub_sim2 ? pub_sim2.title.value : 'Guide des Meilleures Pratiques' }}</h4>
            <div class="related-date">{{ pub_sim2 ? pub_sim2.created.value|date('d M Y') : 'Il y a 4 jours' }}</div>
        </div>
    </a>

    {% set pub_sim3 = publications_similaires[2]|default(null) %}
    {% set pub_sim3_url = pub_sim3 ? path('entity.node.canonical', {'node': pub_sim3.id}) : '#' %}
    <a href="{{ pub_sim3_url }}" class="related-post">
        <div class="related-icon">üìä</div>
        <div class="related-info">
            <h4>{{ pub_sim3 ? pub_sim3.title.value : 'Rapport Annuel 2024' }}</h4>
            <div class="related-date">{{ pub_sim3 ? pub_sim3.created.value|date('d M Y') : 'Il y a 1 semaine' }}</div>
        </div>
    </a>

</div>


        </aside>

    </div>
</main>

{{ attach_library('egov_theme/custom-comments') }}
{{ attach_library('egov_theme/share-save') }}


