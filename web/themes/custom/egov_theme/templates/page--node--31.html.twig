

  {# ========== HEADER ========== #}
    <nav>
        <a href="/" class="logo">
            <img src="/themes/custom/egov_theme/images/senegal.png" 
                 alt="Logo Interop√©rabilit√© S√©n√©gal" 
                 style="width: 60px; height: 60px; object-fit: contain;">
            <div class="logo-text">
                <h1>Jokkoo</h1>
                <div class="logo-subtitle">Plateforme d'Interop√©rabilit√©</div>
            </div>
        </a>

        {# Menu Desktop avec sous-menu #}
        <ul class="nav-menu-desktop">
            <li class="has-submenu">
                <a href="javascript:void(0);">Accueil</a>
                <ul class="submenu">
                    <li><a href="/presentation-du-projet">A propos</a></li>
                    <li><a href="/publications">Publications</a></li>
                    <li><a href="/actualites">Actualit√©s</a></li>
                    <li><a href="/videos-podcast">Vid√©os Podcast</a></li>
                </ul>
            </li>
            <li><a href="/services">Services</a></li>
            <li><a href="/cadre-et-standard">Cadres et Standards</a></li>
            <li><a href="/tableau-de-bord">Tableau de Bord</a></li>
            <li><a href="/contact">Contact</a></li>
        </ul>

        {# Actions Mobile #}
        <div class="nav-actions-mobile">
            <button class="search-btn" aria-label="Rechercher">üîç</button>
            <button class="hamburger-btn" id="hamburgerBtn" aria-label="Menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

<!-- Hero Section -->
<section class="news-hero">
    <div class="news-hero-content">
        <h1>Publications Officielles</h1>
        <p>Consultez nos rapports, √©tudes et documents officiels de la plateforme nationale d'interop√©rabilit√©</p>
    </div>
</section>

<!-- Filter Section -->
<section class="filter-section">
    <div class="filter-container">
        <span class="filter-label">Filtrer par :</span>
        <button class="filter-btn active" data-filter="all">Tout voir</button>
        <button class="filter-btn" data-filter="urgent">Urgent</button>
        <button class="filter-btn" data-filter="nouveau">Nouveau</button>
        <button class="filter-btn" data-filter="info">Info</button>
        <button class="filter-btn" data-filter="annonce">Annonce</button>
    </div>
</section>

<!-- Main Content -->
<main class="news-main">
    <div class="news-container">

        <!-- Featured Article - DYNAMIQUE -->
        {% if publications_recentes and publications_recentes|length > 0 %}
            {% set featured = publications_recentes|first %}
            {% set categorie_featured = featured.field_categorie.value %}

            <article class="featured-article">
                <div class="featured-image">
                    {% if categorie_featured == 'urgent' %}üöÄ
                    {% elseif categorie_featured == 'nouveau' %}
                        <img src="/themes/custom/egov_theme/icon/graph.png" alt="" style="width: 78px; height: 58px;" class="help-icon">

                    {% elseif categorie_featured == 'info' %}
                        <img src="/themes/custom/egov_theme/icon/publication.png" alt="" style="width: 78px; height: 58px;" class="help-icon">

                    {% elseif categorie_featured == 'annonce' %}üéâ
                    {% else %}üöÄ
                    {% endif %}
                </div>
                <div class="featured-content">
                    <span class="featured-badge">√Ä LA UNE</span>
                    <h2>{{ featured.title.value }}</h2>
                    <div class="featured-meta">
                        <span>üìÖ {{ featured.created.value|date('d M Y') }}</span>
                        {% if featured.field_temps_lecture.value %}
                            <span>‚è±Ô∏è {{ featured.field_temps_lecture.value }} min de lecture</span>
                        {% endif %}
                    </div>
                    <p class="featured-excerpt">
                        {{ featured.field_extrait.value }}
                    </p>
                    <a href="{{ path('entity.node.canonical', {'node': featured.nid.value}) }}" class="featured-link">
                        <span>Lire l'article complet</span>
                        <span>‚Üí</span>
                    </a>
                </div>
            </article>
        {% else %}
            {# FALLBACK Featured si pas d'actualit√©s #}
            <article class="featured-article">
                <div class="featured-image">
                    üöÄ
                </div>
                <div class="featured-content">
                    <span class="featured-badge">√Ä LA UNE</span>
                    <h2>Lancement de l'API Universelle v3.0</h2>
                    <div class="featured-meta">
                        <span>üìÖ 15 Novembre 2025 </span>
                        <span>‚è±Ô∏è 8 min de lecture</span>
                    </div>
                    <p class="featured-excerpt">
                        D√©couvrez la nouvelle version majeure de notre API avec des fonctionnalit√©s 
                        r√©volutionnaires : authentification biom√©trique, traitement temps r√©el am√©lior√©, 
                        et int√©gration IA pour une meilleure pr√©diction des services citoyens.
                    </p>
                    <a href="#" class="featured-link">
                        <span>Lire l'article complet</span>
                        <span>‚Üí</span>
                    </a>
                </div>
            </article>
        {% endif %}

        <!-- Articles Grid - DYNAMIQUE -->
        <div class="articles-grid">
            {% if publications_recentes and publications_recentes|length > 1 %}
                {# CONTENU DYNAMIQUE DEPUIS DRUPAL #}
                {% for actualite in publications_recentes %}
                    {% if loop.index > 1 %} {# Skip le premier qui est featured #}
                        {% set categorie = actualite.field_categorie.value %}

                        {# Mapping des ic√¥nes #}
                        {% if categorie == 'urgent' %}
                            {% set icon = '‚ö†Ô∏è' %}
                            {% set badge_label = 'URGENT' %}
                        {% elseif categorie == 'nouveau' %}
                            {% set icon = 'üéì' %}
                            {% set badge_label = 'NOUVEAU' %}
                        {% elseif categorie == 'info' %}
                            {% set icon = 'üìù' %}
                            {% set badge_label = 'INFO' %}
                        {% elseif categorie == 'annonce' %}
                            {% set icon = 'ü§ù' %}
                            {% set badge_label = 'ANNONCE' %}
                        {% else %}
                            {% set icon = 'üì∞' %}
                            {% set badge_label = 'INFO' %}
                        {% endif %}
                        {% set icon = '' %}

                        <article class="article-card" data-category="{{ categorie }}">
                            <div class="article-image">
                                <span class="article-badge badge-{{ categorie }}">{{ badge_label }}</span>
                                {{ icon }}
                            </div>
                            <div class="article-content">
                                <div class="article-meta">
                                    <span>üìÖ {{ actualite.created.value|date('d M Y') }}</span>
                                    {% if actualite.field_temps_lecture.value %}
                                        <span>‚è±Ô∏è {{ actualite.field_temps_lecture.value }} min</span>
                                    {% endif %}
                                </div>
                                <h3>{{ actualite.title.value }}</h3>
                                <p class="article-excerpt">
                                    {{ actualite.field_extrait.value }}
                                </p>
                                <a href="{{ path('entity.node.canonical', {'node': actualite.nid.value}) }}" class="article-link">
                                    <span>Lire plus</span>
                                    <span>‚Üí</span>
                                </a>
                            </div>
                        </article>
                    {% endif %}
                {% endfor %}

            {% else %}
                {# include '@egov_theme/actualites-fallback.html.twig'  #}


            {% endif %}
        </div>

        <!-- Pagination -->
        <div class="pagination">
            <button class="pagination-btn">‚Äπ</button>
            <button class="pagination-btn active">1</button>
            <button class="pagination-btn">2</button>
            <button class="pagination-btn">3</button>
            <button class="pagination-btn">4</button>
            <button class="pagination-btn">‚Ä∫</button>
        </div>

    </div>
</main>

<!-- Footer -->
{{ include(active_theme_path() ~ '/templates/partials/footer.html.twig') }}



{{ attach_library('egov_theme/publications-page') }}
