
{{ include(active_theme_path() ~ '/templates/partials/header.html.twig') }}


    <!-- Hero Section -->
    <section class="news-hero">
        <div class="news-hero-content">
            <h1>Actualit√©s & Annonces</h1>
            <p>Restez inform√© des derni√®res nouveaut√©s, mises √† jour et √©v√©nements de la plateforme nationale d'interop√©rabilit√©</p>
        </div>
    </section>

    <!-- Filter Section -->
    <section class="filter-section">
        <div class="filter-container">
            <span class="filter-label">Filtrer par :</span>
            <button class="filter-btn active" data-filter="all">Tout voir</button>
            <button class="filter-btn" data-filter="urgent">Urgent</button>
            <button class="filter-btn" data-filter="nouveau">Nouveau</button>
            <button class="filter-btn" data-filter="info">Info</button>
            <button class="filter-btn" data-filter="annonce">Annonce</button>
        </div>
    </section>

<!-- Main Content -->
<main class="news-main">
    <div class="news-container">
        
        <!-- Featured Article - DYNAMIQUE -->
        {% if actualites_recentes and actualites_recentes|length > 0 %}
            {% set featured = actualites_recentes|first %}
            {% set categorie_featured = featured.field_categorie.value %}
            
            <article class="featured-article">
                <div class="featured-image">
                    {% if categorie_featured == 'urgent' %} 
           <img src="/themes/custom/egov_theme/icon/news.png" alt="" style="width: 78px; height: 58px;" class="help-icon">

                    {% elseif categorie_featured == 'nouveau' %}
                     <img src="/themes/custom/egov_theme/icon/graph.png" alt="" style="width: 78px; height: 58px;" class="help-icon">

                    {% elseif categorie_featured == 'info' %}üì¢
                    {% elseif categorie_featured == 'annonce' %}üéâ
                    {% else %}üöÄ
                    {% endif %}
                </div>
                <div class="featured-content">
                    <span class="featured-badge">√Ä LA UNE</span>
                    <h2>{{ featured.title.value }}</h2>
                    <div class="featured-meta">
                        <span>üìÖ {{ featured.created.value|date('d M Y') }}</span>
                        {% if featured.field_temps_lecture.value %}
                            <span>‚è±Ô∏è {{ featured.field_temps_lecture.value }} min de lecture</span>
                        {% endif %}
                    </div>
                    <p class="featured-excerpt">
                        {{ featured.field_extrait.value }}
                    </p>
                    <a href="{{ path('entity.node.canonical', {'node': featured.nid.value}) }}" class="featured-link">
                        <span>Lire l'article complet</span>
                        <span>‚Üí</span>
                    </a>
                </div>
            </article>
        {% else %}
            {# FALLBACK Featured si pas d'actualit√©s #}
            <article class="featured-article">
                <div class="featured-image">
                    üöÄ
                </div>
                <div class="featured-content">
                    <span class="featured-badge">√Ä LA UNE</span>
                    <h2>Lancement de l'API Universelle v3.0</h2>
                    <div class="featured-meta">
                        <span>üìÖ 15 Novembre 2025 </span>
                        <span>‚è±Ô∏è 8 min de lecture</span>
                    </div>
                    <p class="featured-excerpt">
                        D√©couvrez la nouvelle version majeure de notre API avec des fonctionnalit√©s 
                        r√©volutionnaires : authentification biom√©trique, traitement temps r√©el am√©lior√©, 
                        et int√©gration IA pour une meilleure pr√©diction des services citoyens.
                    </p>
                    <a href="#" class="featured-link">
                        <span>Lire l'article complet</span>
                        <span>‚Üí</span>
                    </a>
                </div>
            </article>
        {% endif %}

        <!-- Articles Grid - DYNAMIQUE -->
        <div class="articles-grid">
            {% if actualites_recentes and actualites_recentes|length > 1 %}
                {# CONTENU DYNAMIQUE DEPUIS DRUPAL #}
                {% for actualite in actualites_recentes %}
                    {% if loop.index > 1 %} {# Skip le premier qui est featured #}
                        {% set categorie = actualite.field_categorie.value %}
                        
                        {# Mapping des ic√¥nes #}
                        {% if categorie == 'urgent' %}
                            {% set icon = '‚ö†Ô∏è' %}
                            {% set badge_label = 'URGENT' %}
                        {% elseif categorie == 'nouveau' %}
                            {% set icon = 'üéì' %}
                            {% set badge_label = 'NOUVEAU' %}
                        {% elseif categorie == 'info' %}
                            {% set icon = 'üìù' %}
                            {% set badge_label = 'INFO' %}
                        {% elseif categorie == 'annonce' %}
                            {% set icon = 'ü§ù' %}
                            {% set badge_label = 'ANNONCE' %}
                        {% else %}
                            {% set icon = 'üì∞' %}
                            {% set badge_label = 'INFO' %}
                        {% endif %}
                            {% set icon = '' %}

                        <article class="article-card" data-category="{{ categorie }}">
                            <div class="article-image">
                                <span class="article-badge badge-{{ categorie }}">{{ badge_label }}</span>
                                {{ icon }}
                            </div>
                            <div class="article-content">
                                <div class="article-meta">
                                    <span>üìÖ {{ actualite.created.value|date('d M Y') }}</span>
                                    {% if actualite.field_temps_lecture.value %}
                                        <span>‚è±Ô∏è {{ actualite.field_temps_lecture.value }} min</span>
                                    {% endif %}
                                </div>
                                <h3>{{ actualite.title.value }}</h3>
                                <p class="article-excerpt">
                                    {{ actualite.field_extrait.value }}
                                </p>
                                <a href="{{ path('entity.node.canonical', {'node': actualite.nid.value}) }}" class="article-link">
                                    <span>Lire plus</span>
                                    <span>‚Üí</span>
                                </a>
                            </div>
                        </article>
                    {% endif %}
                {% endfor %}
                
            {% else %}
                 {# include '@egov_theme/actualites-fallback.html.twig'  #}
                               

            {% endif %}
        </div>

        <!-- Pagination -->
        <div class="pagination">
            <button class="pagination-btn">‚Äπ</button>
            <button class="pagination-btn active">1</button>
            <button class="pagination-btn">2</button>
            <button class="pagination-btn">3</button>
            <button class="pagination-btn">4</button>
            <button class="pagination-btn">‚Ä∫</button>
        </div>

    </div>
</main>



<!-- Footer -->
{{ include(active_theme_path() ~ '/templates/partials/footer.html.twig') }}



{{ attach_library('egov_theme/actualites-page') }}

