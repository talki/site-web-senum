{# Template de page pour les video podcast #}

<nav>
    <div class="logo">
        <div class="logo-flag">
            <div class="flag-stripe flag-green"></div>
            <div class="flag-stripe flag-yellow"></div>
            <div class="flag-stripe flag-red"></div>
        </div>
        <div class="logo-text">
            <h1>Jokkoo</h1>
            <div class="logo-subtitle">Plateforme d'Interop√©rabilit√©</div>
        </div>
    </div>

    {# Menu Desktop #}
    <div class="nav-menu-desktop">
        {% if page.primary_menu %}
            {{ page.primary_menu }}
        {% endif %}
    </div>

    {# Actions Mobile #}
    <div class="nav-actions-mobile">
        <button class="search-btn">üîç</button>
        <button class="hamburger-btn" id="hamburgerBtn">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </div>
</nav>
<!-- Hero Section -->
<section class="podcast-hero">
    <div class="hero-content">
        <div class="hero-icon">üìπ</div>
        <h1>Vid√©os Podcast eGov</h1>
        <p>D√©couvrez nos √©missions exclusives sur la transformation digitale, l'innovation technologique et l'avenir de l'e-gouvernement au S√©n√©gal</p>
    </div>
</section>

<!-- Stats Bar -->
<section class="stats-bar">
    <div class="stats-container">
        <div class="stat-item">
            <span class="stat-number">{{ videos_podcast|length }}+</span>
            <span class="stat-label">√âpisodes Publi√©s</span>
        </div>
        <div class="stat-item">
            <span class="stat-number">250K+</span>
            <span class="stat-label">Vues Totales</span>
        </div>
        <div class="stat-item">
            <span class="stat-number">15K+</span>
            <span class="stat-label">Abonn√©s</span>
        </div>
        <div class="stat-item">
            <span class="stat-number">12</span>
            <span class="stat-label">Playlists Th√©matiques</span>
        </div>
    </div>
</section>

<!-- Filter Section -->
<section class="filter-section">
    <div class="filter-container">
        <span class="filter-label">Cat√©gories :</span>
        <button class="filter-btn active" data-filter="all">Tous</button>
        <button class="filter-btn" data-filter="interview">Interviews</button>
        <button class="filter-btn" data-filter="tutorial">Tutoriels</button>
        <button class="filter-btn" data-filter="conference">Conf√©rences</button>
        <button class="filter-btn" data-filter="actualite">Actualit√©s</button>
    </div>
</section>

<!-- Main Content -->
<main class="podcast-main">
    <div class="podcast-container">

        <!-- Featured Video -->
   {% if videos_podcast|first %}
    {% set featured = videos_podcast|first %}
    {% if featured.field_url_video.value %}
        {% set video_id = featured.field_url_video.value|split('live/')[1]|split('?')[0] %}
    {% endif %}
    <div class="featured-video">
        <div class="featured-thumbnail" {% if video_id %}style="background-image: url('https://img.youtube.com/vi/{{ video_id }}/maxresdefault.jpg'); background-size: cover; position: relative;"{% endif %}>
            <span class="video-badge">‚ú® NOUVEAU</span>
            <div class="play-button" {% if video_id %}onclick="playVideoInline(this, '{{ video_id }}')" style="cursor: pointer;"{% endif %}>‚ñ∂</div>
            <span class="video-duration">{{ featured.field_duree.value }}</span>
        </div>
                <div class="featured-details">
                    <span class="featured-category">
                        {% if featured.field_categorie.value == 'interview' %}Interview
                        {% elseif featured.field_categorie.value == 'tutorial' %}Tutoriel
                        {% elseif featured.field_categorie.value == 'conference' %}Conf√©rence
                        {% else %}Actualit√©
                        {% endif %}
                    </span>
                    <h2>{{ featured.title.value }}</h2>
                    <div class="featured-meta">
                        <span>üìÖ {{ featured.created.value|format_date('custom', 'd F Y', null, 'fr') }}</span>
                        <span>üëÅÔ∏è {{ featured.field_vues.value|number_format(0, ',', '.') }} vues</span>
                        <span>üí¨ {{ random(50, 200) }} commentaires</span>
                    </div>
                    <p class="featured-description">
                        {{ featured.field_extrait.value }}
                    </p>
                    <div class="featured-actions">
                        <a href="{{ path('entity.node.canonical', {'node': featured.id}) }}" class="action-btn btn-primary">
                            <span>‚ñ∂</span>
                            <span>Regarder maintenant</span>
                        </a>
                        <button class="action-btn btn-secondary">
                            <span>üìã</span>
                            <span>Playlist</span>
                        </button>
                    </div>
                </div>
            </div>
        {% endif %}

        <!-- Recent Videos Section -->
        <div class="section-header">
            <h2 class="section-title">üé¨ Derniers √âpisodes</h2>
            <a href="#" class="view-all-link">Voir tout ‚Üí</a>
        </div>

        <div class="videos-grid">
            {% for video in videos_podcast %}
                {% if loop.index > 1 %}

                    <div class="video-card" data-category="{{ video.field_categorie.value }}">
                        {% if video.field_url_video.value %}
                            {% set video_id = video.field_url_video.value|split('live/')[1]|split('?')[0] %}
                        {% endif %}

                        <!-- Vignette cliquable pour ouvrir le player -->
                 <!-- Vignette cliquable pour jouer la vid√©o inline -->
<div class="video-thumbnail gradient-{{ random(['purple', 'pink', 'cyan', 'orange', 'blue', 'green', 'indigo', 'red']) }}" 
     {% if video_id %}style="background-image: url('https://img.youtube.com/vi/{{ video_id }}/maxresdefault.jpg'); background-size: cover; position: relative;"{% endif %}>
    {% if loop.index == 2 %}
    <span class="video-new-badge">NOUVEAU</span>
    {% endif %}
    <div class="thumbnail-play" {% if video_id %}onclick="playVideoInline(this, '{{ video_id }}')" style="cursor: pointer;"{% endif %}>‚ñ∂</div>
    <span class="video-time">{{ video.field_duree.value }}</span>
</div>

                        <div class="video-content">
                            <span class="video-category">
                                {% if video.field_categorie.value == 'interview' %}Interview
                                {% elseif video.field_categorie.value == 'tutorial' %}Tutoriel
                                {% elseif video.field_categorie.value == 'conference' %}Conf√©rence
                                {% else %}Actualit√©
                                {% endif %}
                            </span>
                            <!-- Titre cliquable vers la page de d√©tail -->
                            <h3><a href="{{ path('entity.node.canonical', {'node': video.id}) }}">{{ video.title.value }}</a></h3>
                            <p class="video-description">
                                {{ video.field_extrait.value }}
                            </p>
                            <div class="video-stats">
                                <span class="video-stat">
                                    <span>üìÖ</span>
                                    <span>{{ video.created.value|format_date('custom', 'd M Y') }}</span>
                                </span>
                                <span class="video-stat">
                                    <span>üëÅÔ∏è</span>
                                    <span>{{ (video.field_vues.value / 1000)|number_format(1, '.', '') }}K vues</span>
                                </span>
                            </div>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>

        <!-- Playlists Section -->
        <div class="playlists-section">
            <div class="section-header">
                <h2 class="section-title">üìö Playlists Th√©matiques</h2>
                <a href="#" class="view-all-link">Voir toutes ‚Üí</a>
            </div>

            <div class="playlists-grid">

                <div class="playlist-card">
                    <div class="playlist-cover gradient-purple">
                        <span class="playlist-count">12 vid√©os</span>
                    </div>
                    <div class="playlist-info">
                        <h3>Formation D√©veloppeurs</h3>
                        <p class="playlist-description">
                            Tutoriels complets pour ma√Ætriser l'int√©gration des API eGov
                        </p>
                        <div class="playlist-meta">
                            <span>6h 30min</span>
                            <span>45K vues</span>
                        </div>
                    </div>
                </div>

                <div class="playlist-card">
                    <div class="playlist-cover gradient-pink">
                        <span class="playlist-count">8 vid√©os</span>
                    </div>
                    <div class="playlist-info">
                        <h3>Interviews Experts</h3>
                        <p class="playlist-description">
                            Rencontres avec les acteurs cl√©s de la transformation digitale
                        </p>
                        <div class="playlist-meta">
                            <span>4h 15min</span>
                            <span>38K vues</span>
                        </div>
                    </div>
                </div>

                <div class="playlist-card">
                    <div class="playlist-cover gradient-cyan">
                        <span class="playlist-count">15 vid√©os</span>
                    </div>
                    <div class="playlist-info">
                        <h3>S√©curit√© & Conformit√©</h3>
                        <p class="playlist-description">
                            Tout sur la s√©curit√© des donn√©es et la conformit√© r√©glementaire
                        </p>
                        <div class="playlist-meta">
                            <span>7h 45min</span>
                            <span>52K vues</span>
                        </div>
                    </div>
                </div>

                <div class="playlist-card">
                    <div class="playlist-cover gradient-orange">
                        <span class="playlist-count">10 vid√©os</span>
                    </div>
                    <div class="playlist-info">
                        <h3>Innovation & Startups</h3>
                        <p class="playlist-description">
                            D√©couvrez les solutions innovantes de l'√©cosyst√®me tech s√©n√©galais
                        </p>
                        <div class="playlist-meta">
                            <span>5h 20min</span>
                            <span>31K vues</span>
                        </div>
                    </div>
                </div>

                <div class="playlist-card">
                    <div class="playlist-cover gradient-blue">
                        <span class="playlist-count">9 vid√©os</span>
                    </div>
                    <div class="playlist-info">
                        <h3>E-Sant√© & Digital Health</h3>
                        <p class="playlist-description">
                            Digitalisation du secteur de la sant√© au S√©n√©gal
                        </p>
                        <div class="playlist-meta">
                            <span>4h 50min</span>
                            <span>42K vues</span>
                        </div>
                    </div>
                </div>

                <div class="playlist-card">
                    <div class="playlist-cover gradient-green">
                        <span class="playlist-count">14 vid√©os</span>
                    </div>
                    <div class="playlist-info">
                        <h3>Smart Cities & IoT</h3>
                        <p class="playlist-description">
                            Villes intelligentes et Internet des Objets pour l'administration
                        </p>
                        <div class="playlist-meta">
                            <span>6h 10min</span>
                            <span>28K vues</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- Newsletter Section -->
        <div class="newsletter-section">
            <div class="newsletter-icon">üìß</div>
            <h2>Ne Manquez Aucun √âpisode</h2>
            <p>
                Inscrivez-vous √† notre newsletter pour recevoir les notifications des nouveaux 
                √©pisodes, les √©v√©nements √† venir et les contenus exclusifs.
            </p>
            <form class="newsletter-form">
                <input type="email" class="newsletter-input" placeholder="Votre adresse email" required>
                <button type="submit" class="newsletter-btn">S'abonner</button>
            </form>
        </div>

    </div>
</main>
    <!-- Footer -->
    <footer>
        <div class="footer-grid">
            <div class="footer-section footer-about">
                <h3>√Ä PROPOS</h3>
                <p>
                    La Plateforme Nationale d'Interop√©rabilit√© du S√©n√©gal (eGov S√©n√©gal) 
                    est une initiative du Minist√®re de la Communication, des T√©l√©communications 
                    et du Num√©rique dans le cadre du New Deal Technologique.
                </p>
                <div class="social-icons">
                    <div class="social-icon"></div>
                    <div class="social-icon"></div>
                    <div class="social-icon"></div>
                    <div class="social-icon"></div>
                    <div class="social-icon"></div>
                </div>
            </div>

            <div class="footer-section">
                <h3>SERVICES</h3>
                <ul>
                    <li><a href="services.html#protection-sociale">Protection Sociale</a></li>
                    <li><a href="services.html#troisieme-age">Troisi√®me √Çge</a></li>
                    <li><a href="services.html#education">√âducation</a></li>
                    <li><a href="services.html#citoyennete">Citoyennet√©</a></li>
                    <li><a href="services.html#taxes">Taxes & Imp√¥ts</a></li>
                    <li><a href="services.html#sante">Sant√©</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h3>RESSOURCES</h3>
                <ul>
                    <li><a href="#">Documentation API</a></li>
                    <li><a href="#">Guides d'Int√©gration</a></li>
                    <li><a href="#">Catalogue d'API</a></li>
                    <li><a href="#">Centre d'Aide</a></li>
                    <li><a href="#">FAQ</a></li>
                    <li><a href="#">Blog</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h3>CONTACT</h3>
                <ul>
                    <li><a href="#">üìç Dakar, S√©n√©gal</a></li>
                    <li><a href="#">üìß contact@egov.sn</a></li>
                    <li><a href="#">üìû +221 33 XXX XX XX</a></li>
                    <li><a href="#">üí¨ Chat en Direct</a></li>
                    <li><a href="#">üé´ Cr√©er un Ticket</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p>¬© 2025 eGov S√©n√©gal - MCTN/SENUM - R√©publique du S√©n√©gal</p>
            <div class="footer-bottom-links">
                <a href="#">Mentions L√©gales</a>
                <a href="#">Politique de Confidentialit√©</a>
                <a href="#">Conditions d'Utilisation</a>
                <a href="#">Accessibilit√©</a>
                <a href="#">Plan du Site</a>
            </div>
        </div>
    </footer>

    <!-- Modal pour le player vid√©o -->
    <div id="videoModal" class="video-modal" onclick="closeVideoModal()">
        <div class="video-modal-content" onclick="event.stopPropagation()">
            <span class="video-modal-close" onclick="closeVideoModal()">&times;</span>
            <div id="videoPlayerContainer"></div>
        </div>
    </div>